<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메모리 관리 문제</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        #menu {
            width: 100%;
            background-color: #333;
            overflow: hidden;
        }
        #menu ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        #menu ul li {
            float: left;
        }
        #menu ul li a {
            display: block;
            padding: 14px 20px;
            color: white;
            text-align: center;
            text-decoration: none;
        }
        #menu ul li a:hover {
            background-color: #575757;
        }
        .container {
            width: 80%;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        h1, h2 {
            color: #333;
        }
        p {
            line-height: 1.6;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            overflow: auto;
        }
        code {
            display: block;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div id="menu">
        <ul>
            <li><a href="/">코드검사기</a></li>
            <li><a href="/guide">보안상식</a></li>
            <li><a href="/quiz">퀴즈</a></li>
            <li><a href="/code_runner">코드러너</a></li>
        </ul>
    </div>
    <div class="container">

        <h2 id="security-vulnerabilities">보안 취약점</h2>
        <p>다음은 C 언어 프로그램에서 발생할 수 있는 일반적인 보안 취약점입니다:</p>

        <h3>정수형 오버플로우</h3>
        <p>사용자가 제공하는 입력값을 사용하고 그 과정에서 정수형 오버플로우가 발생하는 경우 보안상 문제를 유발할 수 있습니다. 동적 메모리 할당을 위해 외부 입력값을 배열의 크기로 사용하는 경우 그 값이 음수가 아닌지 검사하는 작업이 필요합니다. 외부 입력값으로 배열에 접근할 경우, 입력값이 너무 클 때 음수가 되어 시스템에 문제가 발생할 수 있습니다.</p>
        <p>예외처리로 오버플로우가 발생했는지 확인하고 처리해야 합니다.</p>

        <h3>메모리 버퍼 오버플로우</h3>
        <p>연속된 메모리 공간을 사용하는 프로그램에서 할당된 메모리의 범위를 넘어선 위치에 자료를 읽거나 쓰려고 할 때 발생합니다. 취약한 API를 사용하는 경우 발생할 수 있습니다. 특히, 문자열 저장 시 NULL 문자로 종료하지 않으면 의도하지 않은 결과를 가져오게 되므로 NULL 문자를 버퍼 범위 내에 삽입해 NULL 문자로 종료하도록 해야 합니다.</p>

        <h3>포맷 스트링 삽입</h3>
        <p>외부로부터 입력된 값을 검증하지 않고 입출력 함수의 포맷 문자열로 그대로 사용하는 경우 발생할 수 있는 보안 약점입니다.</p>

        <h3>중요한 자원에 대한 잘못된 권한 설정</h3>
        <p>SW가 중요한 보안관련 자원에 대해 읽기 또는 수정하기 권한을 의도하지 않게 허가할 경우, 권한을 갖지 않은 사용자가 해당 자원을 사용하게 됩니다.</p>

        <h3>종료되지 않는 반복문 또는 재귀함수의 사용</h3>
        <p>재귀의 순환 횟수를 제어하지 못해 할당된 메모리나 프로그램 스택 등의 자원을 과다하게 사용하면 위험합니다. 대부분의 경우, 귀납 조건이 없는 재귀함수는 무한 루프에 빠져들게 되고 자원고갈을 유발함으로써 시스템의 정상적인 서비스를 제공할 수 없게 됩니다.</p>

        <h3>오류 상황에 대한 대응 부재</h3>
        <p>오류가 발생할 수 있는 부분을 확인했으나, 이러한 오류에 대해 예외 처리하지 않을 경우, 공격자는 오류 상황을 악용하여 개발자가 의도하지 않은 방향으로 프로그램이 동작하도록 할 수 있습니다.</p>

        <h3>부적절한 예외 처리</h3>
        <p>프로그램 수행 중에 함수의 결괏값에 대한 적절한 처리 또는 예외 상황에 대한 조건을 적절하게 검사하지 않을 경우, 예기치 않은 문제를 일으킬 수 있습니다. 값을 반환하는 모든 함수의 결괏값을 검사하여, 그 값이 의도했던 값인지 검사하고, 예외 처리를 사용하는 경우, 광범위한 예외 처리 대신 구체적인 예외 처리를 수행합니다.</p>

        <h2 id="code-errors">코드 오류</h2>
        <p>다음은 C 언어 코드에서 발생할 수 있는 일반적인 코드 오류입니다:</p>

        <h3>NULL Pointer 역참조</h3>
        <p>NULL Pointer 역참조는 '일반적으로 그 객체가 NULL이 될 수 없다'라고 하는 가정을 위반했을 때 발생합니다. 공격자가 의도적으로 NULL Pointer 역참조를 발생시키는 경우, 그 결과를 발생하는 예외 상황을 이용해 추후의 공격을 계획하는 데 사용될 수 있습니다. NULL이 될 수 있는 레퍼런스는 참조하기 전에 NULL인지 검사해 안전한 경우에만 사용합니다.</p>

        <h3>부적절한 자원 해제</h3>
        <p>프로그램의 자원, 예를 들면 열린 파일 디스크립터, 힙 메모리, 소켓 등은 유한한 자원입니다. 이러한 자원을 할당받아 사용한 후, 더 이상 사용하지 않는 경우 적절히 반환해야 합니다. 프로그램 오류 또는 에러로 사용이 끝난 자원을 반환하지 못하는 경우입니다. 자원을 획득하여 사용한 다음에는 반드시 자원을 해제하고 반환합니다. 그렇지 않을 경우 파일을 연 상태에서 오류가 발생했을 때 자원 누수가 발생합니다.</p>
        <p>오류가 발생한 상황에서도 정상적으로 파일 핸들러를 종료하도록 수정합니다.</p>

        <h3>해제된 자원 사용</h3>
        <p>C언어에서는 동적 메모리 관리는 보안 취약점을 유발하는 대표적인 프로그램 결함의 원인입니다. 해체한 메모리를 참조하게 되면 예상치 못한 값 또는 코드를 실행하게 되어 의도하지 않은 결과가 발생하게 됩니다. 메모리 해제 후, 포인터에 NULL을 저장하거나 다른 적절한 값을 저장하면 의도하지 않은 코드의 실행을 막을 수 있습니다.</p>

        <h3>초기화되지 않은 변수 사용</h3>
        <p>C언어의 경우 스택 메모리에 저장되는 지역변수는 생성될 때 자동으로 초기화되지 않습니다. 모든 변수는 사용 전에 반드시 올바른 초깃값을 할당함으로써 이러한 문제를 예방합니다.</p>

        <h3>취약한 API 사용</h3>
        <p>예를 들어, gets() 함수는 크기와 상관없이 입력값을 버퍼에 저장하기 때문에 버퍼 오버플로우를 유발할 수 있습니다. fgets()와 같이 버퍼의 크기를 제한하는 안전한 함수를 사용합니다.</p>
    </div>
</body>
</html>
